<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>untitled</title>
	<meta name="generator" content="TextMate http://macromates.com/">
	<meta name="author" content="Alper Ã‡ugun">
	<!-- Date: 2011-04-26 -->
	
	<script type="text/javascript" charset="utf-8" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>

    <script type="text/javascript" charset="utf-8">
        function isStopWord(word) {
            var stopWords = [
                'het', 'en', 'dan', 'dat', 'van', 'niet', 'met', 'door', 'een', 'zijn', 'ons', 'maar'];
            
            if (stopWords.indexOf(word) >= 0) {
                return true;
            } else {
                return false;
            }
        }
        
    
        $(document).ready(function() {
            $('#scan').click(function() {
                var frequencies = {};
                
                var text = $('#text').val();
                
                var patt = /[!\w][\w']+[!\w]/g;
                
                var match = patt.exec(text);
                while(match) {
                    var word = match[0];
                    
                    if (word in frequencies) {
                        frequencies[word] += 1;
                    } else {
                        frequencies[word] = 1;
                    }
                    
                    match = patt.exec(text);
                }
                
                for (var word in frequencies) {
                    var freqClass = '';
                    switch(frequencies[word]) {
                        case 1:
                            break;
                        case 2:
                            freqClass = 'freq2';
                            break;
                        case 3:
                            freqClass = 'freq3';
                            break;
                        case 4:
                            freqClass = 'freq4';
                            break;
                        default:
                            freqClass = 'freqmore';
                    }
                    
                    if (frequencies[word] > 1 && !isStopWord(word)) {
                        text = text.replace(new RegExp(word, 'g'), '<span class="' + freqClass + '">' + word + '</span>');
                    }
                    
                }
                
                $('#output').html(text);
            });
        });
    </script>

    <style type="text/css" media="screen">
        
        #output SPAN {
            color: white;
        }
        
        .freq2 {
            background-color: green;
        }
        
        .freq3 {
            background-color: yellow;
        }
        
        .freq4 {
            background-color: orange;
        }
        
        .freqmore {
            background-color: red;
        }
        
    </style>
</head>
<body>
    
    <textarea name="text" id="text" rows="8" cols="40"></textarea>
    <input type="button" name="scan" value="Scan" id="scan">
    
    <p id="output"></p>

</body>
</html>